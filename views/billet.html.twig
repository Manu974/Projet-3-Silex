{% extends "layout.html.twig" %}

{% block title %}{{ billet.title }}{% endblock %}

{% block content %}
<div class="panel panel-primary">
  <div class="panel-heading"><h2>{{ billet.title }}</h2></div>
  <div class="panel-body"><p>{{ billet.content|raw }}</p></div>
</div>
<p>
    <h3>Comments</h3>

    {% if comments %}
    {% for comment in comments %}
        {% if comment.status == '1' %}
        <strong>{{ comment.pseudo}} at {{comment.dateofpost}}</strong> said : {{ comment.content }}<br>
        {% endif %}
        {% endfor %}
    {% else %}
     No comments yet.
    {% endif %}

    <h3>Add a comment</h3>

    {% if commentForm %}
        {{ form_start(commentForm,{ 'attr': {'class': 'form-horizontal'} }) }}
            <div class="form-group">
                {{ form_errors(commentForm.pseudo) }}
                {{ form_widget(commentForm.pseudo, { 'attr':  {
                    'rows': '4',
                    'class': 'form-control',
                    'placeholder': 'entrez un pseudo'
                }}) }}
            </div>
            <div class="form-group">
                {{ form_errors(commentForm.content) }}
                {{ form_widget(commentForm.content, { 'attr':  {
                    'rows': '4',
                    'class': 'form-control',
                    'placeholder': 'Enter your comment'
                }}) }}
            </div>

            <div class="form-group" style="display: none">
                {{ form_errors(commentForm.dateofpost) }}
                {{ form_widget(commentForm.dateofpost, { 'attr':  {
                    'rows': '6',
                    'class': 'form-control',
                    'placeholder': 'date to your commentaire'
                }}) }}
            </div>
            <div class="form-group">
                <input type="submit" class="btn btn-primary" value="Publish comment" />
            </div>
        {{ form_end(commentForm) }}
        {% for flashMessage in app.session.flashbag.get('success') %}
            <div class="alert alert-success">
                {{ flashMessage }}
            </div>
        {% endfor %}
    {% else %}
        <a href="{{ path('login') }} ">Log in</a> to add comments.
    {% endif %}
</p>
{% endblock %}